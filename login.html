<html>
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      background-color: #436;
      color: whitesmoke;
    }

    button {
      border: 0;
      padding: 1rem;
      border-radius: 0.1rem;
      background-color: #1f9ff1;
      cursor: pointer;
    }
  </style>
  <body>
    <h1>Please identify yourself.</h1>
    <input id="key" /> <button onclick="submit()">Auth</button>
    <script>
      function submit(e) {
        const key = document.getElementById("key").value;
        console.log("got key", key);
        fetch("/auth", {
          body: JSON.stringify({ key }),
          headers: {
            "Content-Type": "application/json; charset=utf-8"
          },
          method: "POST"
        })
          .then((res) => {
            console.log("got a response", res.status);
            if (res.status === 204) {
              window.location = "/";
            }
          })
          .catch((err) => console.err(err));
      }
    </script>
  </body>
</html>
